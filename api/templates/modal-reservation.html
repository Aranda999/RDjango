{% load static %}
<head>
    <meta charset="UTF-8">    
    <!-- FullCalendar CSS -->
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.2/main.min.css" rel="stylesheet">
    <!-- Estilos adicionales (opcional) -->
    <link href="{% static 'css/estilos.css' %}" rel="stylesheet">

</head>
<form method="POST" action="{% url 'homeuser' %}" onsubmit="return validarFormulario()">
    {% csrf_token %}
    
    <!-- Modal de Reservación -->
    <div class="modal fade" id="reservacionModal" tabindex="-1" aria-labelledby="reservacionModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content" style="border-radius: 15px;">
                <div class="modal-header" style="background-color: rgba(106, 99, 99, 0.93); border-top-left-radius: 13px; border-top-right-radius: 13px; height: 20px;">
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                            style="background-color: transparent; border: none; padding: 0; font-size: 15px; margin-right: 3px;"></button>
                </div>
                <h5 class="modal-title" id="reservacionModalLabel" style="margin-left: 15px;">Metro CDMX</h5>
                <div class="modal-body">
                    <!-- Calendario -->
                    <div class="row">
                        <div class="col-12">
                            <div id="calendar"></div>  <!-- Contenedor para el calendario -->
                        </div>
                    </div>
                    
                    <!-- Detalles del formulario de reservación -->
                    <div class="mb-2">
                        <label class="form-label fw-bold" style="color: black;">EVENTO</label>
                        <input type="text" class="form-control form-control-sm" id="evento" name="evento"
                            placeholder="Ingrese el evento" style="border: 1px solid black;" required>
                    </div>
                    <div class="mb-2">
                        <label class="form-label fw-bold" style="color: black;">COMENTARIOS</label>
                        <textarea class="form-control form-control-sm" id="comentarios" name="comentarios" rows="2"
                                placeholder="Ingrese sus comentarios" style="resize: none; border: 1px solid black;"></textarea>
                        <p style="margin-bottom: 5px; font-size: 12px;">Max 15 palabras</p>
                    </div>
                    
                    <!-- Fecha y Número de personas -->
                    <div class="row">
                        <div class="col-6">
                            <div class="mb-2">
                                <label class="form-label fw-bold" style="color: black;">FECHA</label>
                                <input type="date" class="form-control form-control-sm" id="fechaReservacion" name="fechaReservacion"
                                    style="border: 1px solid black;" required>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="mb-2">
                                <label class="form-label fw-bold" style="color: black;">NÚMERO DE PERSONAS</label>
                                <input type="number" class="form-control form-control-sm" id="numPersonas" name="numPersonas" min="1"
                                    placeholder="Ingrese el número" style="border: 1px solid black;" required>
                            </div>
                        </div>
                    </div>

                    <!-- Sala -->
                    <div class="row align-items-start">
                        <div class="col-4">
                            <div class="mb-2">
                                <label class="form-label fw-bold" style="color: black;">SALA DE JUNTAS</label>
                                <select class="form-select form-select-sm" id="salaJuntas" name="salaJuntas" style="border: 1px solid black; width: 140px;" required>
                                    <option selected disabled>Seleccione</option>
                                    {% for sala in salas %}
                                        <option value="{{ sala.id_sala }}" data-equipo="{{ sala.equipo }}" data-capacidad="{{ sala.capacidad }}">{{ sala.nombre }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Botón reservar -->
                    <button type="submit" class="btn"
                            style="background-color: #ff6200; color: black; width: 50%; margin: 15px auto 0 auto; display: block; padding: 10px; border: 1px solid black; border-radius: 5px;">
                        Reservar
                    </button>
                </div>
            </div>
        </div>
    </div>
</form>

{% if messages %}
<div class="alert alert-info" style = "height: 60px; position: relative; top: 50px;">
    {% for message in messages %}
        <p style = "font-size: 14px; text-align: center; " >{{ message }}</p>
    {% endfor %}
</div>
{% endif %}  


<style>
    .detallesSala {
        display: none;
        z-index: 1060;
        position: fixed;
        top: 50%;
        left: calc(50% + 280px);
        transform: translateY(-50%);
    }

    .detallesSala .contenido {
        background-color: white;
        border: .5px solid black; /* contorno negro */
        padding: 10px 15px;
        width: 350px; /* más chico */
        height: auto;
        max-height: 200px; /* limitar altura */
        overflow-y: auto; /* scroll si se pasa */
        box-shadow: 0px 4px 10px rgba(0,0,0,0.1);
        font-size: 14px; /* texto más compacto */
        line-height: 1.4;
    }
    .detallesSala h5 {
        font-weight: bold;
        font-size: 16px;
        margin-bottom: 8px;
        color: #333;
    }

    .detallesSala p {
        margin: 4px 0;
    }
</style>

